<!DOCTYPE html>
<html>
  <head>
    <title>Video Sync Room</title>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <style>
      body {
        font-family: sans-serif;
        text-align: center;
        margin-top: 30px;
      }
      iframe {
        border: none;
        margin-top: 20px;
      }
      button {
        margin: 10px;
        padding: 10px 20px;
        font-size: 16px;
        cursor: pointer;
      }
      #status {
        margin-top: 15px;
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <h2>üé¨ Shared Movie Room</h2>

    <iframe
      id="video"
      src="https://vidsrc.in/embed/movie?tmdb=777443"
      width="640"
      height="360"
      allowfullscreen
    ></iframe>

    <br />
    <button onclick="sendPlay()">‚ñ∂ Play</button>
    <button onclick="sendPause()">‚è∏ Pause</button>

    <p id="status">Status: Waiting...</p>

    <script>
      const socket = io("http://localhost:8000");

      function sendPlay() {
        socket.emit("video-action", { action: "play" });
      }

      function sendPause() {
        socket.emit("video-action", { action: "pause" });
      }

      socket.on("video-action", ({ action }) => {
        document.getElementById(
          "status"
        ).innerText = `üîÅ ${action.toUpperCase()} requested by host`;

        alert(`‚ö† Please click "${action}" on your video manually`);
      });
    </script>
  </body>
</html>
